#!/bin/bash
# Pre-commit hook: Auto-format Rust code before commit
# Install: cp scripts/pre-commit .git/hooks/ && chmod +x .git/hooks/pre-commit

set -e

# Only run if we have Rust files staged
if git diff --cached --name-only | grep -q '\.rs$'; then
    echo "ðŸ”§ Running cargo fmt..."
    cd mcp
    
    # Auto-format (not just check)
    cargo fmt
    
    # Re-stage any formatted files
    cd ..
    git diff --name-only | grep '\.rs$' | xargs -r git add
    
    echo "âœ… Code formatted and staged"
fi
